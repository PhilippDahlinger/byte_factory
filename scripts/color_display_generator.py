import json

from bython_compiler.create_blueprint import blueprint_to_json, json_to_blueprint
from scripts.display_generator import signal_dict

base_blueprint = "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"
base_json = blueprint_to_json(base_blueprint)
# save json
with open("temp.json", "w") as file:
    json.dump(base_json, file, indent=4)
ys = [entity["position"]["y"] for entity in base_json["blueprint"]["entities"]]
ys = list(set(ys))
ys.sort()
xs = [entity["position"]["x"] for entity in base_json["blueprint"]["entities"]]
xs = list(set(xs))
xs.sort()
xs = [int(x) for x in xs]

with open("output/signal_dict.json", "r") as f:
    signal_dict = json.load(f)
signal_dict = {int(k): v for k, v in signal_dict.items()}

start_x_pos = -718

for entity in base_json["blueprint"]["entities"]:
    index = int(entity["position"]["x"]) - start_x_pos
    entity["control_behavior"]["rgb_signal"]["name"] = signal_dict[index + 1]
print("new blueprint")
print(json_to_blueprint(base_json))

